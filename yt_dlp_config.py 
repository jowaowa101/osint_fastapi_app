#FOR YOUTUBE SEARCH PROXY ERROR

import yt_dlp
import requests

# Patch yt_dlp to always use requests
yt_dlp.utils.std_headers['User-Agent'] = "Mozilla/5.0"

def patched_http_post(url, data=None, headers=None, timeout=None, **kwargs):
    return requests.post(url, data=data, headers=headers, timeout=timeout, **kwargs)

yt_dlp.utils.urlopen = requests.get  # fallback for GET
yt_dlp.utils.request_post = patched_http_post